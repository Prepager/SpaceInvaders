// Header File
#include "game.h"

//////////////////////
// Global Variables //
//////////////////////

// Video Driver Struct.
XAxiVdma vdma;

// Display Controller Struct.
DisplayCtrl controller;

// Buffer Arrays.
u8 buffer[DISPLAY_NUM_FRAMES][MAX_FRAME];
u8 *bufferPointer[DISPLAY_NUM_FRAMES];

/**
 * Initialize the game logic and display.
 */
int main()
{
	// Initialize the display.
	initializeDisplay();

	// Render the scene.
	while (1) {
		renderScene();
	}

	//
	return 0;
}




void renderScene()
{
	//
	u8 *frame = controller.framePtr[controller.curFrame];

	//
	for(int xcoi = 0; xcoi < (DISPLAY_WIDTH*3); xcoi += 3)
	{
		//
		int addr = xcoi;

		//
		for(int ycoi = 0; ycoi < DISPLAY_HEIGHT; ycoi++)
		{
			//
			frame[addr + 0] = 0;	// Green
			frame[addr + 1] = 255;	// Blue
			frame[addr + 2] = 0;	// Red

			//
			addr += STRIDE;
		}
	}

	//
	Xil_DCacheFlushRange((unsigned int) frame, MAX_FRAME);
}
